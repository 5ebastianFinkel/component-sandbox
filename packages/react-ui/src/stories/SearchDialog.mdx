import { Meta, Canvas } from '@storybook/addon-docs/blocks';
import { SearchDialogProvider } from '../components/SearchDialog';
import * as SearchDialogStories from '../components/SearchDialog/SearchDialog.stories.tsx';

<Meta title="Components/SearchDialog/Documentation" />

# Search Dialog Component

The `SearchDialog` component provides a powerful, keyboard-driven search interface for Storybook that allows users to quickly find stories and documentation.

## Features

- üîç **Fast Search**: Powered by FlexSearch with dual-index architecture
- ‚å®Ô∏è **Keyboard Shortcuts**: Global CMD/CTRL+K shortcut and navigation  
- üìö **Content Types**: Searches both stories and documentation
- üè∑Ô∏è **Advanced Filtering**: Search shortcuts for precise filtering
- üìñ **Search History**: Persistent search history with localStorage
- üéØ **Smart Ranking**: Relevance-based result scoring
- ‚ôø **Accessible**: Full keyboard navigation and ARIA support
- üì± **Responsive**: Mobile-friendly design
- ‚ö° **Performance**: Caching, debouncing, and virtualization
- üåô **Dark Mode**: Full dark mode support

## Usage

### With Provider (Recommended)

<Canvas of={SearchDialogStories.WithProvider} />

The `SearchDialogProvider` is the easiest way to add global search to your Storybook:

```tsx
import { SearchDialogProvider } from '@component-sandbox/react-ui';

function App() {
  return (
    <SearchDialogProvider>
      <YourApp />
    </SearchDialogProvider>
  );
}
```

### Controlled Usage

<Canvas of={SearchDialogStories.Default} />

For more control, use the `SearchDialog` component directly:

```tsx
import { SearchDialog } from '@component-sandbox/react-ui';
import { useState } from 'react';

function MyComponent() {
  const [open, setOpen] = useState(false);
  
  return (
    <SearchDialog
      open={open}
      onOpenChange={setOpen}
      onSelect={(result) => console.log('Selected:', result)}
    />
  );
}
```

## Search Shortcuts

The Search Dialog supports powerful shortcuts:

| Shortcut | Description | Example |
|----------|-------------|---------|
| `s:` | Search stories only | `s:button` |
| `d:` | Search documentation only | `d:getting started` |
| `c:` | Search by component name | `c:mermaid` |
| `t:` | Search by tags | `t:form` |
| `h:` | Search headings in docs | `h:installation` |

## Keyboard Navigation

- `CMD/CTRL + K` - Open search dialog
- `ESC` - Close dialog  
- `‚Üë` / `‚Üì` - Navigate results
- `Enter` - Select highlighted result

## Performance

- Search response: under 50ms for typical queries
- Initial load: under 200ms for dialog appearance
- Smooth 60fps animations with virtualization
- Efficient caching with automatic cleanup

## Browser Support

Works on all modern browsers including Chrome, Firefox, Safari, and Edge.